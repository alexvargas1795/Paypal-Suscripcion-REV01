<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PPCP Standard</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/minstyle.io@2.0.1/dist/css/minstyle.io.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
   
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm"></div>
        <div class="col-sm">
          <h2 class="ms-text-center">ai-generated NFT Bored Ape</h2>
          <h2>Hola esto es una prueba</h2>

            <div id="paypal-button-container-P-52U03048PH970630VMTBORPI"></div>
            <script src="https://www.paypal.com/sdk/js?client-id=Ac4yYcdsGav0EFQDeHhOvSmNXE2_9IpNNQ8EZnVuYPY74Bn16j2vSCimOd04ts2kcJTPB6rcPhQDR_S4&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>
            <script>
              paypal.Buttons({
                  style: {
                      shape: 'rect',
                      color: 'blue',
                      layout: 'vertical',
                      label: 'subscribe'
                  },
                  createSubscription: function(data, actions) {
                    return actions.subscription.create({
                      /* Creates the subscription */
                      plan_id: 'P-52U03048PH970630VMTBORPI'
                    });
                  },
                  onApprove: function(data, actions) {
                    return fetch("https://paypal-checkout-bu1x.onrender.com/complete_order", {
                        method: "post", headers: { "Content-Type": "application/json; charset=utf-8" },
                        body: JSON.stringify({
                         "varUserID": "12345",
                         "planID": plan_id
                        })
                    })
                      .then(() => alert(data.subscriptionID))
                      .then(()=> setTimeout( function() { window.location.href = "https://p70dcb2e9618d4491be43f71061d1ce7e.bildr.com/dashboard?Pago=True"; }, 5000 ) )
                      .catch(() => {
                        console.log("Error");
                        
                      })
                    
                  }
              }).render('#paypal-button-container-P-52U03048PH970630VMTBORPI'); // Renders the PayPal button
            </script>
          </div>
        </div>
        <div class="col-sm"></div>
      </div>
    </div>
  </body>
</html>
